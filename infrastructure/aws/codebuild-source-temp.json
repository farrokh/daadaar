{
  "type": "NO_SOURCE",
  "buildspec": "version: 0.2\n\nenv:\n  variables:\n    RUN_MIGRATIONS: \"true\"\n    RUN_SEED: \"false\"\n    CLEAN: \"false\"\n\nphases:\n  pre_build:\n    commands:\n      - echo \"Logging in to ECR...\"\n      - aws ecr get-login-password --region \"$AWS_REGION\" | docker login --username AWS --password-stdin \"$(echo \"$IMAGE_URI\" | cut -d/ -f1)\"\n  build:\n    commands:\n      - echo \"Pulling image $IMAGE_URI\"\n      - docker pull \"$IMAGE_URI\"\n      - if [ \"$RUN_MIGRATIONS\" = \"true\" ]; then docker run --rm -e DATABASE_URL=\"$DATABASE_URL\" \"$IMAGE_URI\" bun /usr/src/app/backend/src/db/migrate.ts; fi\n      - if [ \"$RUN_SEED\" = \"true\" ]; then docker run --rm -e DATABASE_URL=\"$DATABASE_URL\" -e CLEAN=\"$CLEAN\" \"$IMAGE_URI\" bun /usr/src/app/backend/src/db/seed-organizations.ts; fi\n"
}
